<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZestSide Secret Code Converter</title>
  <style>
    :root {
      --bg: #0d1117;
      --card: #161b22;
      --text: #f0f6fc;
      --accent: #58a6ff;
      --button1: #238636;
      --button2: #d29922;
      --button3: #0366d6;
    }

    [data-theme="light"] {
      --bg: #f5f5f5;
      --card: #ffffff;
      --text: #111;
      --accent: #0078ff;
      --button1: #2ea043;
      --button2: #f0b232;
      --button3: #409cff;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
      transition: background 0.5s, color 0.5s;
    }

    .card {
      background: var(--card);
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 0 20px #00000044;
      width: 95%;
      max-width: 500px;
      text-align: center;
      transition: 0.4s;
    }

    h1 {
      color: var(--accent);
      margin-bottom: 15px;
      text-shadow: 0 0 8px var(--accent);
    }

    textarea {
      width: 100%;
      height: 110px;
      margin: 10px 0;
      border-radius: 12px;
      padding: 12px;
      border: 1px solid #30363d;
      background: var(--bg);
      color: var(--text);
      font-size: 15px;
      outline: none;
      resize: none;
      transition: border 0.3s, background 0.3s;
    }

    textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 8px var(--accent);
    }

    .btn-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-top: 10px;
    }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      color: #fff;
      cursor: pointer;
      font-size: 15px;
      transition: 0.3s;
    }

    button:hover {
      transform: scale(1.05);
    }

    .encode-btn { background: var(--button1); }
    .decode-btn { background: var(--button2); }
    .copy-btn { background: var(--button3); }
    .theme-btn { background: var(--accent); }

    footer {
      margin-top: 15px;
      font-size: 13px;
      color: #8b949e;
    }

    footer span { color: var(--accent); }

    .typing {
      border-right: 3px solid var(--accent);
      white-space: pre-wrap;
      overflow: hidden;
      animation: blink 0.7s step-end infinite;
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }

    input[type="password"] {
      padding: 8px;
      width: 70%;
      border-radius: 8px;
      border: 1px solid #30363d;
      background: var(--bg);
      color: var(--text);
      margin-top: 10px;
      outline: none;
    }
  </style>
</head>
<body>

  <div class="card">
    <h1>üîê ZestSide Secret Code</h1>
    <textarea id="inputText" placeholder="Enter your message..."></textarea>

    <div class="btn-container">
      <button class="encode-btn" onclick="encode()">Encode üîÅ</button>
      <button class="decode-btn" onclick="askPassword()">Decode üîç</button>
      <button class="copy-btn" onclick="copyText()">Copy üìã</button>
      <button class="theme-btn" onclick="toggleTheme()">‚òÄÔ∏è / üåô</button>
    </div>

    <textarea id="outputText" placeholder="Result will appear here..." readonly></textarea>
    <div id="passwordArea" style="display:none;">
      <input type="password" id="passwordInput" placeholder="Enter secret password">
      <button class="decode-btn" onclick="decode()">Unlock üîì</button>
    </div>
  </div>

  <footer>Made with üíô by <span>ZestSide</span></footer>

  <script>
    const map = {
      q: "+", w: "√ó", e: "=", r: "#", t: "%", y: "^", u: "&", i: "*", o: "(", p: ")",
      a: "@", s: "$", d: "~", f: "?", g: "!", h: ":", j: ";", k: "<", l: ">",
      z: "{", x: "}", c: "[", v: "]", b: "/", n: "\\", m: "_"
    };
    const reverseMap = Object.fromEntries(Object.entries(map).map(([k,v]) => [v,k]));
    const PASSWORD = "zestcode"; // your secret decode password

    // Restore saved text
    window.onload = () => {
      document.getElementById("inputText").value = localStorage.getItem("inputText") || "";
      document.getElementById("outputText").value = localStorage.getItem("outputText") || "";
    };

    // Save messages
    function saveMessages() {
      localStorage.setItem("inputText", document.getElementById("inputText").value);
      localStorage.setItem("outputText", document.getElementById("outputText").value);
    }

    function typeEffect(text) {
      const output = document.getElementById("outputText");
      output.value = "";
      let i = 0;
      const interval = setInterval(() => {
        output.value += text[i];
        i++;
        if (i >= text.length) clearInterval(interval);
      }, 20);
    }

    function encode() {
      const text = document.getElementById("inputText").value;
      const result = text.split("").map(ch => {
        const lower = ch.toLowerCase();
        return map[lower] || ch;
      }).join("");
      typeEffect(result);
      localStorage.setItem("outputText", result);
      saveMessages();
    }

    function askPassword() {
      document.getElementById("passwordArea").style.display = "block";
    }

    function decode() {
      const pass = document.getElementById("passwordInput").value;
      if (pass !== PASSWORD) {
        alert("‚ùå Wrong password!");
        return;
      }
      const text = document.getElementById("inputText").value;
      const result = text.split("").map(ch => reverseMap[ch] || ch).join("");
      typeEffect(result);
      saveMessages();
      document.getElementById("passwordArea").style.display = "none";
    }

    function copyText() {
      const output = document.getElementById("outputText");
      output.select();
      document.execCommand("copy");
      alert("Copied to clipboard! üìã");
    }

    function toggleTheme() {
      const current = document.body.getAttribute("data-theme");
      document.body.setAttribute("data-theme", current === "light" ? "dark" : "light");
    }
  </script>

</body>
</html>
